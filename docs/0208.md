# 1

基础版 (6k_base)：追求极致稳定与清晰度

ffmpeg -i input.mp3 -c:a libopus -b:a 6k \
    -ar 8000 -ac 1 \
    -application voip \
    -frame_duration 60 \
    -compression_level 10 \
    -dtx 1 \
    -af "highpass=f=80,silenceremove=stop_periods=-1:stop_duration=1:stop_threshold=-50dB" \
    -map_metadata -1 -vn 6k_base.opus

高级版 (8k_high)：追求极致清晰度与流畅度

ffmpeg -i input.mp3 -c:a libopus -b:a 8k \
    -ar 16000 -ac 1 \
    -application voip \
    -frame_duration 60 \
    -compression_level 10 \
    -dtx 1 \
    -af "highpass=f=80" \
    -map_metadata -1 -vn 8k_high.opus


播放

ffplay -nodisp -autoexit '/Users/liyi/work/enyan/data/audio_test/4/8k_high.opus'

# 2

piper_tts or sherpa_onnx

import 'package:sherpa_onnx/sherpa_onnx.dart' as sherpa;

Future<void> initSherpa() async {
  // 1. 获取模型文件的本地路径（需要先从 Assets 拷贝到文件系统）
  String modelPath = "path/to/vits_model.onnx";
  String lexionPath = "path/to/lexicon.txt";
  String tokensPath = "path/to/tokens.txt";

  // 2. 初始化离线配置
  var config = sherpa.OfflineTtsVitsModelConfig(
    model: modelPath,
    lexicon: lexionPath,
    tokens: tokensPath,
  );

  // 3. 创建引擎实例
  var tts = sherpa.OfflineTts(
    modelConfig: sherpa.OfflineTtsModelConfig(vits: config),
    // 其他配置项...
  );
}



A. 专有名词的读音 (Pronunciation)
圣经中有大量特殊人名和地名（如：示每、洗濯盆、禚）。AI 可能会读错。

对策：您需要一个 JSON 格式的纠错词典。在将文本交给 AI 之前，先进行正则替换（例如将“末后”强制标注为拼音 mò hòu）。

